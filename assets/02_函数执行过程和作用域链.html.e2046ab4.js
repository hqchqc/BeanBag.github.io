import{e as n}from"./app.044a4b86.js";import{_ as a}from"./plugin-vue_export-helper.21dcd24c.js";const s={},p=n(`<h1 id="_02-\u51FD\u6570\u6267\u884C\u8FC7\u7A0B\u548C\u4F5C\u7528\u57DF\u94FE" tabindex="-1"><a class="header-anchor" href="#_02-\u51FD\u6570\u6267\u884C\u8FC7\u7A0B\u548C\u4F5C\u7528\u57DF\u94FE" aria-hidden="true">#</a> 02_\u51FD\u6570\u6267\u884C\u8FC7\u7A0B\u548C\u4F5C\u7528\u57DF\u94FE</h1><h2 id="\u51FD\u6570\u7684\u6267\u884C\u8FC7\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u51FD\u6570\u7684\u6267\u884C\u8FC7\u7A0B" aria-hidden="true">#</a> \u51FD\u6570\u7684\u6267\u884C\u8FC7\u7A0B</h2><p>\u9996\u5148\u770B\u4EE5\u4E0B\u4EE3\u7801\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;why&quot;</span><span class="token punctuation">;</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> num1 <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> num2 <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>\u5177\u4F53\u6267\u884C\u8FC7\u7A0B\u5982\u4E0B\uFF1A</p><ol><li>\u9996\u5148\u51FD\u6570\u7F16\u8BD1\u9636\u6BB5\u4F1A\u521B\u9020\u4E00\u4E2A GlobaleObject,\u8FD9\u91CC\u9762\u7684\u6709\u4E00\u4E9B Date\u3001String \u7B49\u5BF9\u8C61\uFF0C\u8FD8\u6709 window \u5BF9\u8C61\uFF0C\u9664\u6B64\u4E4B\u5916\u5C31\u662F\u6211\u4EEC\u4EE3\u7801\u7684\u8FD9\u4E9B\u53D8\u91CF\uFF1A</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Global Object (GO)</span>
<span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  <span class="token literal-property property">num1</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  <span class="token literal-property property">num2</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  <span class="token literal-property property">result</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  <span class="token literal-property property">foo</span><span class="token operator">:</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ol start="2"><li>\u5F53\u89E3\u6790\u5230\u51FD\u6570\u7C7B\u578B\u7684\u65F6\u5019\uFF0C\u8FD9\u65F6\u5019\u7531\u4E8E\u51FD\u6570\u662F\u4E00\u79CD\u7279\u6B8A\u7684\u5BF9\u8C61\u7C7B\u578B\uFF0C\u4E0D\u662F\u57FA\u672C\u6570\u636E\u7C7B\u578B\uFF0C\u6240\u4EE5\u5F15\u64CE\u4F1A\u5355\u72EC\u5F00\u8F9F\u4E00\u5757\u5185\u5B58\u7A7A\u95F4\u7528\u4EE5\u5B58\u653E\u51FD\u6570\u4E2D\u7684\u53D8\u91CF\u548C\u7236\u7EA7\u4F5C\u7528\u57DF\uFF0C\u4E8E\u662F\u4E0A\u9762\u7684 GlobalObject \u5C31\u4F1A\u5C06 foo \u7684\u5730\u65B9\u5B58\u653E\u4E3A\u4E00\u4E2A\u5730\u5740\uFF1B</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Global Object (GO)</span>
<span class="token punctuation">{</span>
  <span class="token operator">...</span><span class="token punctuation">,</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  <span class="token literal-property property">num1</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  <span class="token literal-property property">num2</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  <span class="token literal-property property">result</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token number">0xa00</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ol start="3"><li><p>\u7F16\u8BD1\u9636\u6BB5\u7ED3\u675F\uFF0C\u5230\u6267\u884C\u9636\u6BB5\uFF0C\u6267\u884C\u9700\u8981\u6709\u4E00\u4E2A ECS(\u6267\u884C\u4E0A\u4E0B\u6587\u6808)\uFF0C\u6709\u4E86\u5B83\u4E4B\u540E\uFF0C\u90A3\u4E48\u73B0\u5728\u8981\u6267\u884C\u5168\u5C40\u7684\u4EE3\u7801\uFF0C\u6240\u4EE5\u9700\u8981\u4E00\u4E2A\u5168\u5C40\u6267\u884C\u4E0A\u4E0B\u6587 GEC \uFF0C\u5B83\u91CC\u8FB9\u5305\u542B\u4E86\u4E24\u90E8\u5206\u5185\u5BB9\uFF0C\u4E00\u4E2A\u662F\u53D8\u91CF\u5BF9\u8C61 VO\uFF0CVO \u8FD9\u91CC\u7B49\u540C\u4E8E GO\uFF0C\u8FD8\u6709\u4E00\u4E2A\u662F\u4E3A\u6267\u884C\u8FC7\u7A0B\u800C\u5F00\u8F9F\u7684\u7A7A\u95F4\uFF1B</p></li><li><p>\u6267\u884C\u5230\u51FD\u6570\u7684\u65F6\u5019\uFF0C\u51FD\u6570\u7684\u6267\u884C\u4F1A\u5F00\u8F9F\u51FD\u6570\u7684 FEC(functional exection context \u6267\u884C\u4E0A\u4E0B\u6587), \u5B83\u91CC\u8FB9\u4E5F\u662F\u4FDD\u5B58\u4E24\u90E8\u5206\u5185\u5BB9\uFF0C\u4E00\u4E2A\u662F\u6D3B\u52A8\u5BF9\u8C61 AO(Activation object),\u53E6\u4E00\u90E8\u5206\u662F\u6267\u884C\u8FC7\u7A0B\u5F00\u8F9F\u7684\u7A7A\u95F4\uFF0C\u8FD9\u4E2A\u65F6\u5019\u53EF\u4EE5\u770B\u5230\u6211\u4EEC\u7684 foo \u4E2D\u7684 m \u5728\u7F16\u8BD1\u9636\u6BB5\u5DF2\u7ECF\u5B58\u5728\u4E86\uFF0C\u503C\u4E3A undefined, \u6240\u4EE5\u8FD9\u91CC\u6253\u5370 undefined</p></li><li><p>\u5F53\u51FD\u6570\u6267\u884C\u5B8C\u4E4B\u540E\uFF0C\u6574\u4E2A FEC \u51FD\u6570\u6267\u884C\u4E0A\u4E0B\u6587\u4F1A\u51FA\u6808\uFF0C\u5982\u679C\u540E\u9762\u6709\u91CD\u65B0\u8C03\u7528\u7684\u8BDD\uFF0C\u4F1A\u91CD\u65B0\u5165\u6808\uFF0C\u51FA\u6808\u4E4B\u540E\u673A\u4F1A\u88AB\u5185\u5B58\u56DE\u6536</p></li></ol><p><img src="https://raw.githubusercontent.com/hqchqc/staticRepo/master/images/\u51FD\u6570\u6267\u884C\u8FC7\u7A0B.png" alt="\u51FD\u6570\u6267\u884C\u8FC7\u7A0B"></p><p>\u4EE5\u4E0A\u8FC7\u7A0B\u5728 AST \u9636\u6BB5\u5C31\u4F1A\u88AB\u786E\u5B9A\u4E0B\u6765\uFF0C\u5305\u62EC\u4F5C\u7528\u57DF</p><h2 id="\u4F5C\u7528\u57DF\u94FE" tabindex="-1"><a class="header-anchor" href="#\u4F5C\u7528\u57DF\u94FE" aria-hidden="true">#</a> \u4F5C\u7528\u57DF\u94FE</h2><p>\u5F53\u6211\u4EEC\u67E5\u627E\u4E00\u4E2A\u53D8\u91CF\u7684\u65F6\u5019\uFF0C\u662F\u6839\u636E\u4F5C\u7528\u57DF\u94FE\u6765\u67E5\u627E\u7684</p><p>\u5728\u6211\u4EEC\u7684\u51FD\u6570\u6267\u884C\u4E0A\u4E0B\u6587\u548C\u5168\u5C40\u7684\u6267\u884C\u4E0A\u4E0B\u6587\u662F\u4FDD\u5B58\u4E86\u6211\u4EEC\u7684\u4F5C\u7528\u57DF\u7684\uFF0C\u5982\u4E0B\u56FE</p><p><img src="https://raw.githubusercontent.com/hqchqc/staticRepo/master/images/20220504000001.png" alt="\u4F5C\u7528\u57DF"></p><p>\u8FD8\u662F\u4E0A\u9762\u7684\u4F8B\u5B50\uFF0C\u6B64\u65F6\u6211\u5728 foo \u51FD\u6570\u4E2D\u518D\u5B9A\u4E49\u4E00\u4E2A\u51FD\u6570\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;why&quot;</span><span class="token punctuation">;</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> num1 <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> num2 <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>\u6267\u884C\u8FC7\u7A0B\uFF1A</p><ol><li>\u9996\u5148\u7F16\u8BD1\u9636\u6BB5\uFF0C\u521B\u5EFA\u51FA GO\uFF0C\u5305\u542B name\u3001num1\u3001num2\u3001result \u503C\u4E3A undefined \u4EE5\u53CA foo\uFF0C\u503C\u4E3A\u5185\u5B58\u5730\u5740\uFF0C\u6CE8\u610F\u8FD9\u91CC foo \u51FD\u6570\u5185\u5305\u542B\u53E6\u4E00\u4E2A\u51FD\u6570\uFF0C\u6628\u5929\u6211\u4EEC\u77E5\u9053\u8FD9\u91CC\u53EA\u4F1A\u8FDB\u884C\u9884\u7F16\u8BD1\uFF0C\u9884\u7F16\u8BD1\u9636\u6BB5\u4F1A\u521B\u5EFA AO \u5BF9\u8C61\uFF0C\u5E76\u4E14\u627E\u5230\u76F8\u5173\u7684\u53D8\u91CF\uFF0C\u53EA\u6709\u5230\u6211\u4EEC\u6267\u884C\u9636\u6BB5\uFF0C\u521B\u5EFA\u51FA bar \u7684\u51FD\u6570\u6267\u884C\u4E0A\u4E0B\u6587\u7684\u65F6\u5019\uFF0C\u624D\u4F1A\u8FDB\u884C\u771F\u6B63\u7684\u5168\u91CF\u6267\u884C\uFF1B</li><li>\u5230\u6267\u884C\u9636\u6BB5\uFF0C\u4F1A\u9996\u5148\u521B\u5EFA\u6267\u884C\u4E0A\u4E0B\u6587\u6808\uFF0C\u7136\u540E\u521B\u5EFA\u5168\u5C40\u6267\u884C\u4E0A\u4E0B\u6587\u538B\u5165\u6808\u4E2D\uFF0C\u5168\u5C40\u6267\u884C\u4E0A\u4E0B\u6587\u4E2D\u89E3\u6790\u5230 foo \u51FD\u6570\uFF0C\u4E8E\u662F\u521B\u5EFA foo \u7684\u51FD\u6570\u6267\u884C\u4E0A\u4E0B\u6587\uFF0C\u7EE7\u7EED\u89E3\u6790 foo \u7684\u51FD\u6570\u6267\u884C\u4E0A\u4E0B\u6587\uFF0C\u53D1\u73B0\u91CC\u8FB9\u8FD8\u6709\u4E00\u4E2A bar \u51FD\u6570\uFF0C\u53C8\u521B\u5EFA\u51FA bar \u7684\u51FD\u6570\u6267\u884C\u4E0A\u4E0B\u6587\uFF0C\u7EE7\u7EED\u6267\u884C\uFF1B</li><li>\u6267\u884C\u5B8C\u6BD5\u540E\uFF0C\u5C06 bar \u7684\u6267\u884C\u4E0A\u4E0B\u6587\u51FA\u6808\uFF0C\u518D\u5C06 foo \u7684\u6267\u884C\u4E0A\u4E0B\u6587\u51FA\u6808\uFF0C\u6700\u540E\u5C06\u5168\u5C40\u7684\u6267\u884C\u4E0A\u4E0B\u6587\u51FA\u6808\uFF0C\u5B8C\u6210\u6574\u4F53\u6D41\u7A0B\uFF1B</li></ol><p><img src="https://raw.githubusercontent.com/hqchqc/staticRepo/master/images/20220504000002.png" alt="\u5D4C\u5957\u51FD\u6570\u7684\u6267\u884C\u6D41\u7A0B"></p><h2 id="\u51FD\u6570\u8C03\u7528\u51FD\u6570\u7684\u6267\u884C\u8FC7\u7A0B" tabindex="-1"><a class="header-anchor" href="#\u51FD\u6570\u8C03\u7528\u51FD\u6570\u7684\u6267\u884C\u8FC7\u7A0B" aria-hidden="true">#</a> \u51FD\u6570\u8C03\u7528\u51FD\u6570\u7684\u6267\u884C\u8FC7\u7A0B</h2><p>\u770B\u4E00\u4E0B\u8FD9\u4E2A\u4F8B\u5B50\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> message <span class="token operator">=</span> <span class="token string">&quot;Hello Global&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> message <span class="token operator">=</span> <span class="token string">&quot;Hello Bar&quot;</span><span class="token punctuation">;</span>
  <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>\u76F4\u63A5\u4E0A\u56FE\uFF1A</p><p><img src="https://raw.githubusercontent.com/hqchqc/staticRepo/master/images/20220504000003.png" alt="\u51FD\u6570\u8C03\u7528\u51FD\u6570\u7684\u6267\u884C\u6D41\u7A0B"></p><p>\u6267\u884C\u8FC7\u7A0B\u5927\u81F4\u90FD\u5DEE\u4E0D\u591A\uFF0C\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u5728\u6211\u4EEC\u7684\u7F16\u8BD1\u9636\u6BB5\u4F5C\u7528\u57DF\u5C31\u5DF2\u7ECF\u786E\u5B9A\u4E86\uFF0C\u8FD9\u91CC\u5728 bar \u4E2D\u6267\u884C foo\uFF0Cfoo \u4E2D\u6253\u5370 message, \u6B64\u65F6 foo \u5728\u81EA\u5DF1\u7684 AO \u4E2D\u627E message \u8FD9\u4E2A\u53D8\u91CF\uFF0C\u4F1A\u53D1\u73B0\u627E\u4E0D\u5230\uFF0C\u4E8E\u662F\u5C31\u53BB\u5BFB\u627E\u81EA\u5DF1\u7684\u4E0A\u4E00\u5C42\u4F5C\u7528\u57DF\uFF0Cfoo \u7684\u4E0A\u4E00\u5C42\u4F5C\u7528\u57DF\u5728\u56FE\u4E2D\u5F88\u660E\u663E\u662F GO\uFF0C\u4E8E\u662F\u5C31\u53BB GO \u4E2D\u5BFB\u627E message \u53D8\u91CF\uFF0C\u4E8E\u662F\u6253\u5370 Hello Global.</p><p>\u6982\u62EC\u4E00\u4E0B \uFF0C\u9047\u5230\u51FD\u6570\u5982\u4F55\u6267\u884C\uFF1F</p><ul><li>\u5728\u6267\u884C\u7684\u8FC7\u7A0B\u4E2D\u6267\u884C\u5230\u4E00\u4E2A\u51FD\u6570\u65F6\uFF0C\u5C31\u4F1A\u6839\u636E\u51FD\u6570\u4F53\u521B\u5EFA\u4E00\u4E2A\u51FD\u6570\u6267\u884C\u4E0A\u4E0B\u6587\uFF08Functional Execution Context\uFF0C\u7B80\u79F0 FEC\uFF09\uFF0C\u5E76\u4E14\u538B\u5165\u5230 EC Stack \u4E2D</li><li>FEC \u4E2D\u5305\u542B\u4E09\u90E8\u5206\u5185\u5BB9 <ul><li>\u5728\u89E3\u6790\u51FD\u6570\u6210\u4E3A AST \u6811\u7ED3\u6784\u65F6\uFF0C\u4F1A\u521B\u5EFA\u4E00\u4E2A Activation Object\uFF08AO\uFF09 <ul><li>AO \u4E2D\u5305\u542B\u5F62\u53C2\u3001arguments\u3001\u51FD\u6570\u5B9A\u4E49\u548C\u6307\u5411\u51FD\u6570\u5BF9\u8C61\u3001\u5B9A\u4E49\u7684\u53D8\u91CF\uFF1B</li></ul></li><li>\u4F5C\u7528\u57DF\u94FE\uFF1A\u7531 VO\uFF08\u5728\u51FD\u6570\u4E2D\u5C31\u662F AO \u5BF9\u8C61\uFF09\u548C\u7236\u7EA7 VO \u7EC4\u6210\uFF0C\u67E5\u627E\u65F6\u4F1A\u4E00\u5C42\u5C42\u67E5\u627E</li><li>this \u7ED1\u5B9A\u7684\u503C</li></ul></li></ul><p>AO \u5BF9\u8C61\u5728\u7F16\u8BD1\u9636\u6BB5\u5C31\u4F1A\u5B58\u5728\u4E86</p><p><img src="https://raw.githubusercontent.com/hqchqc/staticRepo/master/images/20220504000004.png" alt="FEC\u4E2D\u5305\u542B\u7684\u5185\u5BB9"></p><h2 id="\u53D8\u91CF\u73AF\u5883\u548C\u8BB0\u5F55" tabindex="-1"><a class="header-anchor" href="#\u53D8\u91CF\u73AF\u5883\u548C\u8BB0\u5F55" aria-hidden="true">#</a> \u53D8\u91CF\u73AF\u5883\u548C\u8BB0\u5F55</h2><p>\u5176\u5B9E\u6211\u4EEC\u4E0A\u9762\u7684\u8BB2\u89E3\u90FD\u662F\u57FA\u4E8E\u65E9\u671F ECMA \u7684\u7248\u672C\u89C4\u8303\uFF1A</p><blockquote><p>Every execution context has associated width it a variable object, Variables and functions declared in the source text are added as properties of the variable object. For function code, paramenters are added as properties of the variable object. \u6BCF\u4E00\u4E2A\u6267\u884C\u4E0A\u4E0B\u6587\u4F1A\u88AB\u5173\u8054\u5230\u4E00\u4E2A\u73AF\u5883\u53D8\u91CF(variable object,VO),\u5728\u6E90\u4EE3\u7801\u4E2D\u7684\u53D8\u91CF\u548C\u51FD\u6570\u58F0\u660E\u4F1A\u88AB\u4F5C\u4E3A\u5C5E\u6027\u6DFB\u52A0\u5230 VO \u4E2D\u3002\u5BF9\u4E8E\u51FD\u6570\u6765\u8BF4\uFF0C\u53C2\u6570\u4E5F\u4F1A\u88AB\u6DFB\u52A0\u5230 VO \u4E2D</p></blockquote><p>\u5728\u6700\u65B0\u7684 ECMA \u7684\u7248\u672C\u89C4\u8303\u4E2D\uFF0C\u5BF9\u4E00\u4E9B\u8BCD\u6C47\u8FDB\u884C\u4E86\u4FEE\u6539\uFF1A</p><blockquote><p>Every execution context has an associated VariableEnvironment. Variables and functions declared in ECMAScript code evaluated in an execution context are added as bindings in that VariableEnvironment&#39;s Environment Record. For function code, paramenters are also added as bindings to that Environment Record. \u6BCF\u4E00\u4E2A\u6267\u884C\u4E0A\u4E0B\u6587\u4F1A\u5173\u8054\u5230\u4E00\u4E2A\u53D8\u91CF\u73AF\u5883\uFF08VariableEnvironment\uFF09\u4E2D\uFF0C\u5728\u6267\u884C\u4EE3\u7801\u4E2D\u53D8\u91CF\u548C\u51FD\u6570\u7684\u58F0\u660E\u4F1A\u4F5C\u4E3A\u73AF\u5883\u8BB0\u5F55(Environment Record)\u6DFB\u52A0\u5230\u53D8\u91CF\u73AF\u5883\u4E2D\u3002\u5BF9\u4E8E\u51FD\u6570\u6765\u8BF4\uFF0C\u53C2\u6570\u4E5F\u4F1A\u88AB\u4F5C\u4E3A\u73AF\u5883\u8BB0\u5F55\u6DFB\u52A0\u5230\u53D8\u91CF\u73AF\u5883\u4E2D\u3002</p></blockquote><p>\u901A\u8FC7\u4E0A\u9762\u7684\u53D8\u5316\u6211\u4EEC\u53EF\u4EE5\u77E5\u9053\uFF0C\u5728\u6700\u65B0\u7684 ECMA \u6807\u51C6\u4E2D\uFF0C\u524D\u9762\u7684\u53D8\u91CF\u5BF9\u8C61 VO \u5DF2\u7ECF\u6709\u4E86\u53E6\u5916\u4E00\u4E2A\u79F0\u547C\u4E86\uFF0C\u4E5F\u5C31\u662F\u53D8\u91CF\u73AF\u5883(VE)</p><h2 id="\u4F5C\u7528\u57DF\u63D0\u5347\u9898\u76EE" tabindex="-1"><a class="header-anchor" href="#\u4F5C\u7528\u57DF\u63D0\u5347\u9898\u76EE" aria-hidden="true">#</a> \u4F5C\u7528\u57DF\u63D0\u5347\u9898\u76EE</h2><h3 id="_1-\u5173\u4E8E-return" tabindex="-1"><a class="header-anchor" href="#_1-\u5173\u4E8E-return" aria-hidden="true">#</a> 1. \u5173\u4E8E return</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>\u8FD9\u9053\u9898\u6CE8\u610F\u4E00\u4E0B\u867D\u7136\u8BF4 return \u540E\u9762\u7684\u8BED\u53E5\u4E0D\u4F1A\u6267\u884C\uFF0C\u4F46\u662F\u5728\u7F16\u8BD1\u9636\u6BB5\u8FD8\u662F\u4F1A\u5C06\u6240\u6709\u8BED\u53E5\u8FDB\u884C\u7F16\u8BD1\u7684\uFF0C\u53EA\u662F\u5728\u6267\u884C\u9636\u6BB5\u4E0D\u4F1A\u53BB\u6267\u884C\uFF0C\u6240\u4EE5\u8FD9\u4E2A\u7684 a \u662F\u4E00\u4E2A undefiend\uFF0C\u5E76\u4E0D\u4F1A\u62A5\u9519\uFF01</p><h3 id="_2-\u5173\u4E8E\u9690\u5F0F\u8D4B\u503C" tabindex="-1"><a class="header-anchor" href="#_2-\u5173\u4E8E\u9690\u5F0F\u8D4B\u503C" aria-hidden="true">#</a> 2. \u5173\u4E8E\u9690\u5F0F\u8D4B\u503C</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">(</span>b <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>\u8FD9\u91CC\u6211\u4EEC\u9700\u8981\u6CE8\u610F\u7684\u662F <code>var a = b = 100</code>\u8FD9\u6761\u8BED\u53E5\uFF0C\u8FD9\u91CC\u88AB\u683C\u5F0F\u5316\u63D2\u4EF6\u81EA\u52A8\u6DFB\u52A0\u4E86\u62EC\u53F7\uFF0C\u5B9E\u9645\u4E0A\u8FD9\u91CC\u4F1A\u88AB\u62C6\u5206\u6210\u4E24\u6761\u8BED\u53E5\uFF1A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>b <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> b<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u9488\u5BF9\u7B2C\u4E00\u6761\u8BED\u53E5 <code>b = 100</code> \u5176\u5B9E\u8FD9\u79CD\u5199\u6CD5\u662F\u6709\u95EE\u9898\u7684\uFF0C\u56E0\u4E3A b \u6B64\u65F6\u90FD\u6CA1\u6709\u4EFB\u4F55\u58F0\u660E\uFF0C\u5982\u679C\u662F\u5728\u5176\u5B83\u8BED\u8A00\u4E2D\uFF0C\u8FD9\u672C\u8EAB\u5C31\u662F\u4E0D\u4F1A\u5B58\u5728\u7684\u4E00\u79CD\u5199\u6CD5\uFF0C\u4F46\u662F\u5728 JavaScript \u4E2D\uFF0C\u6211\u4EEC\u5141\u8BB8\u8FD9\u4E48\u505A\uFF0C\u8FD9\u4E48\u505A\u7684\u7ED3\u679C\u5C31\u662F js \u5185\u90E8\u4F1A\u5728\u5168\u5C40\u58F0\u660E\u8FD9\u4E2A b \u53D8\u91CF\uFF0C\u6240\u4EE5 b \u53D8\u91CF\u4F1A\u88AB\u6302\u8F7D\u5230\u5168\u5C40\u4E2D\uFF0C\u6240\u4EE5\u6700\u540E\u5728\u5168\u5C40\u4E2D\u4F1A\u5B58\u5728 b \u53D8\u91CF\u4E3A 100 \u7684\u503C\uFF0C\u800C\u4E0D\u5B58\u5728 a</p><h2 id="\u5185\u5B58\u7BA1\u7406" tabindex="-1"><a class="header-anchor" href="#\u5185\u5B58\u7BA1\u7406" aria-hidden="true">#</a> \u5185\u5B58\u7BA1\u7406</h2><h3 id="\u8BA4\u8BC6\u5185\u5B58\u7BA1\u7406" tabindex="-1"><a class="header-anchor" href="#\u8BA4\u8BC6\u5185\u5B58\u7BA1\u7406" aria-hidden="true">#</a> \u8BA4\u8BC6\u5185\u5B58\u7BA1\u7406</h3><p>\u4E0D\u7BA1\u4EC0\u4E48\u6837\u7684\u7F16\u7A0B\u8BED\u8A00\uFF0C\u5728\u4EE3\u7801\u7684\u6267\u884C\u8FC7\u7A0B\u4E2D\u90FD\u662F\u9700\u8981\u7ED9\u5B83\u5206\u914D\u5185\u5B58\u7684\uFF0C\u4E0D\u540C\u7684\u67D0\u4E9B\u7F16\u7A0B\u8BED\u8A00\u9700\u8981\u6211\u4EEC\u81EA\u5DF1\u624B\u52A8\u7684\u7BA1\u7406\u5185\u5B58\uFF0C\u67D0\u4E9B\u7F16\u7A0B\u8BED\u8A00\u4F1A\u53EF\u4EE5\u81EA\u52A8\u5E2E\u52A9\u6211\u4EEC\u7BA1\u7406\u5185\u5B58\u3002</p><p>\u4E0D\u7BA1\u4EE5\u4EC0\u4E48\u6837\u7684\u65B9\u5F0F\u6765\u7BA1\u7406\u5185\u5B58\uFF0C\u5185\u5B58\u7684\u7BA1\u7406\u90FD\u4F1A\u6709\u5982\u4E0B\u7684\u751F\u547D\u5468\u671F\uFF1A</p><ol><li>\u5206\u914D\u7533\u8BF7\u4F60\u9700\u8981\u7684\u5185\u5B58(\u7533\u8BF7)\uFF1B</li><li>\u4F7F\u7528\u5206\u914D\u7684\u5185\u5B58(\u5B58\u653E\u4E00\u4E9B\u4E1C\u897F\uFF0C\u6BD4\u5982\u5BF9\u8C61\u7B49)\uFF1B</li><li>\u4E0D\u9700\u8981\u4F7F\u7528\u65F6\uFF0C\u5BF9\u5176\u91CA\u653E\uFF1B</li></ol><p>\u4E0D\u540C\u7684\u7F16\u7A0B\u8BED\u8A00\u5BF9\u4E8E\u7B2C\u4E00\u6B65\u548C\u7B2C\u4E09\u6B65\u4F1A\u6709\u4E0D\u540C\u7684\u5B9E\u73B0\uFF1A</p><ul><li>\u624B\u52A8\u7BA1\u7406\u5185\u5B58\uFF1A\u6BD4\u5982 C\u3001C++,\u5305\u62EC\u65E9\u671F\u7684 OC\uFF0C\u90FD\u662F\u9700\u8981\u624B\u52A8\u6765\u7BA1\u7406\u5185\u5B58\u7684\u7533\u8BF7\u548C\u91CA\u653E\u7684(malloc \u548C free \u51FD\u6570);</li><li>\u81EA\u52A8\u7BA1\u7406\u5185\u5B58\uFF1A\u6BD4\u5982 Java\u3001JavaScript\u3001Python\u3001Swift\u3001Dart \u7B49\uFF0C\u5B83\u4EEC\u4F1A\u81EA\u52A8\u5E2E\u52A9\u6211\u4EEC\u7BA1\u7406\u5185\u5B58</li></ul><h3 id="javascript-\u7684\u5185\u5B58\u7BA1\u7406" tabindex="-1"><a class="header-anchor" href="#javascript-\u7684\u5185\u5B58\u7BA1\u7406" aria-hidden="true">#</a> JavaScript \u7684\u5185\u5B58\u7BA1\u7406</h3><ul><li>JavaScript \u4F1A\u5728\u5B9A\u4E49\u53D8\u91CF\u65F6\u4E3A\u6211\u4EEC\u5206\u914D\u5185\u5B58</li><li>\u4F46\u662F\u5185\u5B58\u5206\u914D\u65B9\u5F0F\u662F\u4E00\u6837\u7684\u5417\uFF1F <ul><li>JS \u5BF9\u4E8E\u57FA\u672C\u6570\u636E\u7C7B\u578B\u5185\u5B58\u7684\u5206\u914D\u4F1A\u5728\u6267\u884C\u65F6\uFF0C\u76F4\u63A5\u5728\u6808\u7A7A\u95F4\u8FDB\u884C\u5206\u914D</li><li>JS \u5BF9\u4E8E\u590D\u6742\u6570\u636E\u7C7B\u578B\u5185\u5B58\u7684\u5206\u914D\u4F1A\u5728\u5806\u5185\u5B58\u4E2D\u5F00\u8F9F\u4E00\u5757\u7A7A\u95F4\uFF0C\u5E76\u4E14\u5C06\u8FD9\u5757\u7A7A\u95F4\u7684\u6307\u9488\u8FD4\u56DE\u503C\u53D8\u91CF\u5F15\u7528\uFF1B</li></ul></li></ul><h3 id="javascript-\u7684\u5783\u573E\u56DE\u6536" tabindex="-1"><a class="header-anchor" href="#javascript-\u7684\u5783\u573E\u56DE\u6536" aria-hidden="true">#</a> JavaScript \u7684\u5783\u573E\u56DE\u6536</h3><p>\u56E0\u4E3A\u5185\u5B58\u7684\u5927\u5C0F\u662F\u6709\u9650\u7684\uFF0C\u6240\u4EE5\u5F53\u5185\u5B58\u4E0D\u518D\u9700\u8981\u7684\u65F6\u5019\uFF0C\u6211\u4EEC\u9700\u8981\u5BF9\u5176\u8FDB\u884C\u91CA\u653E\uFF0C\u4EE5\u4FBF\u817E\u51FA\u66F4\u591A\u7684\u5185\u5B58\u7A7A\u95F4</p><p>\u5927\u90E8\u5206\u73B0\u4EE3\u7684\u7F16\u7A0B\u8BED\u8A00\u90FD\u662F\u6709\u81EA\u5DF1\u7684\u5783\u573E\u56DE\u6536\u673A\u5236\uFF1A</p><ul><li>\u5783\u573E\u56DE\u6536\u7684\u82F1\u6587\u662F Garbage Collection,\u7B80\u79F0 GC\uFF1B</li><li>\u5BF9\u4E8E\u90A3\u4E9B\u4E0D\u518D\u4F7F\u7528\u7684\u5BF9\u8C61\uFF0C\u6211\u4EEC\u90FD\u79F0\u4E4B\u4E3A\u5783\u573E\uFF0C\u5B83\u9700\u8981\u88AB\u56DE\u6536\uFF0C\u4EE5\u4FBF\u91CA\u653E\u66F4\u591A\u7684\u7A7A\u95F4</li><li>\u5783\u573E\u56DE\u6536\u5668\u6211\u4EEC\u4E5F\u4F1A\u7B80\u79F0\u4E3A GC</li></ul><p>\u90A3\u4E48 GC \u600E\u4E48\u77E5\u9053\u54EA\u4E9B\u5BF9\u8C61\u662F\u4E0D\u518D\u4F7F\u7528\u5462\uFF1F \u2014\u2014 GC \u7B97\u6CD5</p><h3 id="\u5E38\u89C1\u7684-gc-\u7B97\u6CD5\u2014\u2014\u5F15\u7528\u8BA1\u6570" tabindex="-1"><a class="header-anchor" href="#\u5E38\u89C1\u7684-gc-\u7B97\u6CD5\u2014\u2014\u5F15\u7528\u8BA1\u6570" aria-hidden="true">#</a> \u5E38\u89C1\u7684 GC \u7B97\u6CD5\u2014\u2014\u5F15\u7528\u8BA1\u6570</h3><p>\u5F53\u4E00\u4E2A\u5BF9\u8C61\u6709\u4E00\u4E2A\u5F15\u7528\u6307\u5411\u5B83\u65F6\uFF0C\u90A3\u4E48\u8FD9\u4E2A\u5BF9\u8C61\u7684\u5F15\u7528\u5C31+1\uFF0C\u5F53\u4E00\u4E2A\u5BF9\u8C61\u7684\u5F15\u7528\u4E3A 0 \u65F6\uFF0C\u8FD9\u4E2A\u5BF9\u8C61\u5C31\u53EF\u4EE5\u88AB\u9500\u6BC1\u6389\uFF1B</p><p>\u8FD9\u4E2A\u7B97\u6CD5\u6709\u4E00\u4E2A\u5F88\u5927\u7684\u5F0A\u7AEF\u5C31\u662F\u4F1A\u4EA7\u751F\u5FAA\u73AF\u5F15\u7528\uFF1B</p><p><img src="https://raw.githubusercontent.com/hqchqc/staticRepo/master/images/20220504000005.png" alt="\u5FAA\u73AF\u5F15\u7528"></p><p>\u5FAA\u73AF\u5F15\u7528\u5BFC\u81F4\u8FD9\u4E24\u4E2A\u5BF9\u8C61\u4E00\u76F4\u90FD\u4F1A\u5B58\u5728\u5176\u4ED6\u5BF9\u8C61\u7684\u5F15\u7528\uFF0C\u5BFC\u81F4\u6C38\u8FDC\u4E0D\u4F1A\u88AB\u9500\u6BC1\u3002</p><h3 id="\u5E38\u89C1\u7684-gc-\u7B97\u6CD5\u2014\u2014\u6807\u8BB0\u6E05\u9664" tabindex="-1"><a class="header-anchor" href="#\u5E38\u89C1\u7684-gc-\u7B97\u6CD5\u2014\u2014\u6807\u8BB0\u6E05\u9664" aria-hidden="true">#</a> \u5E38\u89C1\u7684 GC \u7B97\u6CD5\u2014\u2014\u6807\u8BB0\u6E05\u9664</h3><p>\u8FD9\u4E2A\u7B97\u6CD5\u662F\u8BBE\u7F6E\u4E00\u4E2A\u6839\u5BF9\u8C61(root object),\u5783\u573E\u56DE\u6536\u5668\u4F1A\u5B9A\u671F\u4ECE\u8FD9\u4E2A\u6839\u5F00\u59CB\uFF0C\u627E\u6240\u6709\u4ECE\u6839\u5F00\u59CB\u6709\u5F15\u7528\u5230\u7684\u5BF9\u8C61\uFF0C\u5BF9\u4E8E\u90A3\u4E9B\u6CA1\u6709\u5F15\u7528\u5230\u7684\u5BF9\u8C61\uFF0C\u5C31\u8BA4\u4E3A\u662F\u4E0D\u53EF\u7528\u7684\u5BF9\u8C61\uFF1B</p><p>\u8FD9\u4E2A\u7B97\u6CD5\u53EF\u4EE5\u5F88\u597D\u7684\u89E3\u51B3\u5FAA\u73AF\u5F15\u7528\u7684\u95EE\u9898\uFF1A</p><p><img src="https://raw.githubusercontent.com/hqchqc/staticRepo/master/images/20220504000006.png" alt="\u6807\u8BB0\u6E05\u9664"></p><p>JS \u5F15\u64CE\u6BD4\u8F83\u5E7F\u6CDB\u7684\u91C7\u7528\u7684\u5C31\u662F\u6807\u8BB0\u6E05\u9664\u7B97\u6CD5\uFF0C\u5F53\u7136\u7C7B\u4F3C\u4E8E V8 \u5F15\u64CE\u4E3A\u4E86\u8FDB\u884C\u66F4\u597D\u7684\u4F18\u5316\uFF0C\u4ED6\u5728\u7B97\u6CD5\u7684\u5B9E\u73B0\u7EC6\u8282\u4E0A\u4E5F\u4F1A\u7ED3\u5408\u4E00\u4E9B\u5176\u5B83\u7684\u7B97\u6CD5\u3002</p>`,70);function e(t,o){return p}var r=a(s,[["render",e]]);export{r as default};
